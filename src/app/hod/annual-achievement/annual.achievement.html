<div class="container mt-3" *ngIf="organisationInfo">
    <p>
        <a class="btn btn-primary btn-sp" data-toggle="collapse" href="#mission" role="button" aria-expanded="false" aria-controls="mission">Mission</a>
        <button class="btn btn-primary btn-sp" type="button" data-toggle="collapse" data-target="#vision" aria-expanded="false" aria-controls="vision">Vision</button>
        <button class="btn btn-primary btn-sp" type="button" data-toggle="collapse" data-target="#value" aria-expanded="false" aria-controls="value">Values</button>
        <button class="btn btn-primary btn-sp" type="button" data-toggle="collapse" data-target=".multi-collapse" aria-expanded="false" aria-controls="mission vision values">All</button>
    </p>
      <div class="row">
        <div class="col col-lg-12 col-sm-12 collapse multi-collapse" id="mission">
          <div class="card p-3 mb-2">
          <div class="card-icon-title">
            <div class="icon">
                <i class="fas fa-bullseye"></i>
            </div>
            <div class="title">
                Mission
            </div>
            <div class="right-action-btn">
              <div class='dropdown'>
                  <i class="fas fa-ellipsis-v dropdown-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></i>
                  <div class="dropdown-menu animate openBox" aria-labelledby="dropdownMenuButton">
                      <a class="dropdown-item" data-toggle="modal" data-target="#missionVisionForm" (click)="editMisionVision('mission', organizationInfo.mission);">Edit</a>
                    </div>
              </div>
            </div>
          </div>
            <div class="icon-card-body">
                {{organisationInfo.mission}}
            </div>
          </div>
        </div>
        <div class="col col-lg-12 col-sm-12 collapse multi-collapse" id="vision">
          <div  class="card p-3 mb-2">
              <div class="card-icon-title">
                  <div class="icon">
                      <i class="fas fa-eye"></i>
                  </div>
                  <div class="title">
                      Vision
                  </div>
                </div>
            <div class="icon-card-body">
                {{organisationInfo.vision}}
            </div>
          </div>
        </div>
        <div class="col col-lg-12 col-sm-12 collapse multi-collapse" id="value">
            <div class="card p-3 mb-2">
                <div class="card-icon-title">
                    <div class="icon">
                        <i class="fas fa-align-left"></i>
                    </div>
                    <div class="title">
                        Values
                    </div>
                  </div>
              <div class="icon-card-body">
                  <div class="row m-0">
                      <div class="col-lg-4 col-md-6 col-sm-12 card-box" *ngFor="let value of organisationInfo.values;let v = index;">
                        <div class='d-flex flex-column justify-content-start h-100'>
                            <h6><span>{{v+1}}) </span>  {{value.title}}</h6>
                            <p>
                                {{value.description}}
                            </p>
                        </div>  
                      </div>
                  </div>
              </div>
            </div>
          </div>
      </div>
</div>


<!-- filter -->
<div class="filter animate slideInUp">
    <div class="d-flex ml-2">
        <div class="icon">
          <i class="fas fa-calendar-alt"></i>
        </div>
        <div class="form-group dropdown-st">
          <label class="control-label">Plan Year</label>
          <select id="year" name="year" class="form-control" (ngModelChange)="getOpiResultByYear(defaultCycle.cycleId,$event)" style="width:auto;height: auto;padding: 0px;"
          [(ngModel)]="selectedYear">
          <option *ngFor="let y of defaultCycle.cycle;let y = index;" [value]="y" [disabled]="isFuture(y)">{{y}}</option>
        </select>
        </div>
      </div>
    <div class="d-flex">
      <div class="icon">
        <i class="fas fa-calendar-alt"></i>
      </div>
      <div class="form-group dropdown-st">
        <label class="control-label">Strategic Plan</label>
        <select id="cycle" name="cycle" class="form-control" (ngModelChange)="getOpiResult($event)" style="width:auto;height: auto;padding: 0px;"
          [(ngModel)]="defaultCycle">
          <option *ngFor="let c of cycles;let y = index;" [ngValue]="c">{{c.planYear}}: [{{c.startYear}} To {{c.endYear}}]</option>
        </select>
      </div>
    </div>

  </div>
  <!-- end of filter -->

<div class="container-fluid">
  <div class="panel panel-default" *ngFor="let goal of goals;let i = index;">
    <div class="panel-heading">
      <h4 class="panel-title">
        <b>Goal</b> {{i+1}}. {{goal.goal}}</h4>
    </div>
    <div class="panel-body padding-none">
      <div class="panel" *ngFor="let initiative of goal.initiatives;let j=index;">
        <div class="panel-heading">
          <h4 class="panel-title">
            <b>Initiative</b> {{i+1}}.{{j+1}}. {{initiative.initiative}}</h4>
        </div>
        <div class="panel-body padding-none">
          <div class="panel" *ngFor="let activity of initiative.activities;let k=index;">
            <div class="panel-heading">
              <h4 class="panel-title">
                <b>Activity</b> {{i+1}}.{{j+1}}.{{k+1}}. {{activity.activity}}
              </h4>
            </div>
            <div class="panel-body padding-none">
              <div class="panel" *ngFor="let opi of activity.opis;let l=index">
                <div class="panel-heading">
                  <h4 class="panel-title">
                    <b>KPI</b> {{i+1}}.{{j+1}}.{{k+1}}.{{l+1}}. {{opi.opi}}
                  </h4>
                </div>
                <div class="panel-body padding-left" [attr.id]="'accordion'+ i + j + k + l">
                  <div class="row">
                    <div class="col-sm-6 col-md-6 col-lg-3" *ngFor="let report of opi.quartersAnnualReport;let rp=index;">
                      <div class="panel" style="border: 1px solid #0000001c;">
                        <div class="panel-body quarter-block">
                          <b class="quarter">{{report.quarter}}</b>
                          <span class="status">Over all Status</span>
                          <div class="row">
                            <div class="col-sm-6">
                              <strong>Estimated Cost </strong>: {{report.estimatedCost}}
                            </div>
                            <div class="col-sm-6">
                              <strong>Estimated Target </strong>: {{report.estimatedTargetLevel}}
                            </div>
                          </div>
                          <div class="row">
                            <div class="col-sm-6">
                              <strong>Current Cost </strong>:
                              <span>{{report.currentCost}}</span>
                            </div>
                            <div class="col-sm-6">
                              <strong>Achievement</strong>:
                              <span>{{report.currentTargetLevel}}</span>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <fieldset class="the-fieldset panel" *ngFor="let dept of opi.departmentInfo;let d=index;">
                    <legend class="the-legend" [attr.data-parent]="'#accordion'+ i + j + k + l" [attr.data-target]="'#demo' + dept.departmentId+ i + j + k + l"
                      data-toggle="collapse">{{d+1}}. {{dept.department}}</legend>

                    <div [attr.id]="'demo' + dept.departmentId + i + j + k + l" class="collapse" [ngClass]="d?'':'show'" style="position: relative;">
                     
                               <!-- Quarter Boxes -->
          <div *ngIf="!data.evidanceFormId">
              <div class="px-3" *ngFor="let tdl of dept.opiAnnualTargets;let at=index;">
                <div class="d-flex justify-content-between card-header py-2 mt-2">
                  <div>
                    <b>Year:</b> {{tdl.year}}
                  </div>
                  <div>
                    <b>Evidence Form:</b>{{opi.evidanceForm}}
                    <span *ngIf="!opi.evidanceForm">: None</span>
                  </div>
                  <div class="text-right">
                    <b>BASE LINE :</b>{{dept.baseline}}
                  </div>
                </div>
                <div class="d-flex justify-content-center" >
                  <div class="d-flex flex-column card-box small-box p-1 m-2 speed-p7 animate bounceIn" style="width:25%" *ngFor="let lev of tdl.levels;let in=index;">
                    <div class="d-flex justify-content-between mt-2 mx-2">
                        <div>
                          <small>Quarter</small>
                            <div class="text-uppercase">{{lev.quarter}}</div> 
                        </div>
                        <div  class="text-right">
                          <small>Status (role)</small>
                            <div class="text-capitalize">{{lev.status}} <br>({{lev.role}})</div>
                        </div>
                      </div>
  
                    <div class="d-flex justify-content-between mt-2 mx-2">
                        <div>
                          <small>Estimated Cost </small>
                            <div>{{tdl.estimatedCost}}</div> 
                        </div>
                        <div class="text-right">
                            <small>Target </small>
                              <div> {{lev.estimatedTargetLevel}}</div> 
                          </div>
                      </div>
  
                      <div class="d-flex justify-content-between mt-2 mx-2">
                          <div>
                            <small>End Date </small>
                              <div>{{lev.endDate + tdl.year}}</div> 
                          </div>
                          <div>
                              <div *ngIf="!data.evidanceFormId">
                                  <div class="dropdown" *ngIf="lev.evidance&&lev.evidance.length">
                                    <div>
                                        <small>Evidence </small>
                                    </div>
                                    <a class="btn link dropdown-toggle" id="menu1" data-toggle="dropdown" style="padding: 0px;">files
                                      <span class="caret"></span>
                                    </a>
                                    <ul class="dropdown-menu" role="menu" aria-labelledby="menu">
                                      <li role="presentation" *ngFor="let ev of lev.evidance;let e = index;">
                                        <a class="btn btn-link" role="menuitem" tabindex="-1" [attr.href]="ev.url">evidance {{e+1}}</a>
                                      </li>
                                      <li class="text-center" role="presentation" *ngIf="!lev.evidance.length">None</li>
                                    </ul>
                                  </div>
                                </div>
                            </div>
                        </div>
  
                        <div class="d-flex justify-content-between  mt-2 mx-2">
                            <div>
                                <small>Current Cost </small>
                                  <div>{{lev.currentCost}}</div> 
                            </div>
                            <div class="text-right">
                              <small>
                                  Achievement
                              </small>
                              <div>{{lev.currentTargetLevel}}</div>
                              </div>
                          </div>
                  </div>
              </div>
              </div>
            </div>
            <!-- end of quarter boxes -->
                     
                     
<!--                      
                      <div class="panel panel-default" *ngFor="let tdl of dept.opiAnnualTargets;let at=index;">
                        <div class="panel-heading">
                          Year : {{tdl.year}}
                        </div>
                        <div class="panel-body row">
                          <div class="form-group">
                            <label class="control-label col-sm-3 col-md-3 col-lg-1">BASE LINE :</label>{{dept.baseline}}
                            <div class="pull-right">
                              <label class="control-label">Evidence Form</label> :{{opi.evidanceForm}}
                              <span *ngIf="!opi.evidanceForm">: None</span>
                            </div>
                          </div>

                          <div class="col-sm-6 col-md-6 col-lg-3" *ngFor="let lev of tdl.levels;let in=index;">
                            <div class="panel" style="border: 1px solid #0000001c;">
                              <div class="panel-body quarter-block">
                                <b class="quarter">{{lev.quarter}}</b>
                                <span class="status" [style.background-color]="lev.successInfo.color">{{lev.status}} - {{lev.role}}</span>
                                <div class="row">
                                  <div class="col-sm-6">
                                    <strong>Estimated Cost </strong>: {{tdl.estimatedCost}}
                                  </div>
                                  <div class="col-sm-6">
                                    <strong>Estimated Target </strong>: {{lev.estimatedTargetLevel}}
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-sm-6">
                                    <strong>End Date </strong>: {{lev.endDate + tdl.year}}
                                  </div>
                                  <div class="col-sm-6">
                                    <div class="dropdown" *ngIf="lev.evidance&&lev.evidance.length">
                                      <strong>Evidence </strong>:
                                      <a class="btn btn-link dropdown-toggle" type="button" id="menu1" data-toggle="dropdown" style="padding: 0px;">files
                                        <span class="caret"></span>
                                      </a>
                                      <ul class="dropdown-menu" role="menu" aria-labelledby="menu1" style="right: 0;left:unset;font-size:12px;">
                                        <li role="presentation" *ngFor="let ev of lev.evidance;let e = index;">
                                          <a class="btn-link" role="menuitem" tabindex="-1" [attr.href]="ev.url" style="float:left">evidance {{e+1}}</a>
                                        </li>
                                        <li class="text-center" role="presentation" *ngIf="!lev.evidance.length">None</li>
                                        <li role="presentation" class="divider" style="clear: both;"></li>
                                      </ul>
                                    </div>
                                  </div>
                                </div>
                                <div class="row">
                                  <div class="col-sm-6">
                                    <strong>Current Cost </strong>:
                                    <span>{{lev.currentCost}}</span>
                                  </div>
                                  <div class="col-sm-6">
                                    <strong>Achievement</strong>:
                                    <span>{{lev.currentTargetLevel}}</span>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div> -->
                    </div>
                  </fieldset>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>